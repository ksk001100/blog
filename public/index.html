<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://peperoncino000.netlify.com/style.css">
    <link rel="stylesheet" href="https://peperoncino000.netlify.com/color/green.css">

        <link rel="stylesheet" href="https://peperoncino000.netlify.com/color/background_dark.css">
    
    <link rel="stylesheet" href="https://peperoncino000.netlify.com/font-hack.css">

    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://peperoncino000.netlify.com" style="text-decoration: none;">
                    <div class="logo">
                            peperoncino000&#x27;s tech blog
                        </div>
                </a>
            </div>
        </div>

        <nav class="menu">
            <ul class="menu__inner">
                
                <li class="active"><a href="https://peperoncino000.netlify.com">blog</a></li>
            
                <li><a href="https://peperoncino000.netlify.com/tags">tags</a></li>
            
                <li><a href="https://peperoncino000.netlify.com/about">about me</a></li>
            
                <li><a href="https://github.com/KeisukeToyota" target="_blank" rel="noopener noreferrer">github</a></li>
            
                <li><a href="https://twitter.com/peperoncino000" target="_blank" rel="noopener noreferrer">twitter</a></li>
            
                <li><a href="https://lapras.com/public/BE7TXA7" target="_blank" rel="noopener noreferrer">lapras</a></li>
            </ul>
        </nav>
    
    </header>
    

    <div class="content">
        
        <div class="posts">
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://peperoncino000.netlify.com/20191224/">RubyのHashとArrayの文字列要素をforce_encoding</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2019-12-24
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://peperoncino000.netlify.com/tags/ruby/">#Ruby</a></span>
    

                    
        <div class="post-content">
            <p>RubyのHashとArrayの文字列要素を再帰的に<code>force_encoding</code>する</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">encoding_hash</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">hash</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">encode </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">Encoding</span><span style="color:#c0c5ce;">::UTF_8)
  </span><span style="color:#96b5b4;">hash</span><span style="color:#c0c5ce;">&amp;.map </span><span style="color:#b48ead;">do </span><span style="color:#c0c5ce;">|</span><span style="color:#bf616a;">k</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">v</span><span style="color:#c0c5ce;">|
    </span><span style="color:#b48ead;">case</span><span style="color:#c0c5ce;"> v
    </span><span style="color:#b48ead;">when </span><span style="color:#96b5b4;">Hash </span><span style="color:#b48ead;">then </span><span style="color:#c0c5ce;">[k, encoding_hash(v, encode)]
    </span><span style="color:#b48ead;">when </span><span style="color:#96b5b4;">Array </span><span style="color:#b48ead;">then </span><span style="color:#c0c5ce;">[k, encoding_array(v, encode)]
    </span><span style="color:#b48ead;">when </span><span style="color:#96b5b4;">String </span><span style="color:#b48ead;">then </span><span style="color:#c0c5ce;">[k, v.force_encoding(encode)]
    </span><span style="color:#b48ead;">else </span><span style="color:#c0c5ce;">[k, v]
    </span><span style="color:#b48ead;">end
  end</span><span style="color:#c0c5ce;">&amp;.</span><span style="color:#96b5b4;">to_h
</span><span style="color:#b48ead;">end

def </span><span style="color:#8fa1b3;">encoding_array</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">array</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">encode </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">Encoding</span><span style="color:#c0c5ce;">::UTF_8)
  array&amp;.map </span><span style="color:#b48ead;">do </span><span style="color:#c0c5ce;">|</span><span style="color:#bf616a;">v</span><span style="color:#c0c5ce;">|
    </span><span style="color:#b48ead;">case</span><span style="color:#c0c5ce;"> v
    </span><span style="color:#b48ead;">when </span><span style="color:#96b5b4;">Hash </span><span style="color:#b48ead;">then</span><span style="color:#c0c5ce;"> encoding_hash(v, encode)
    </span><span style="color:#b48ead;">when </span><span style="color:#96b5b4;">Array </span><span style="color:#b48ead;">then</span><span style="color:#c0c5ce;"> encoding_array(v, encode)
    </span><span style="color:#b48ead;">when </span><span style="color:#96b5b4;">String </span><span style="color:#b48ead;">then</span><span style="color:#c0c5ce;"> v.force_encoding(encode)
    </span><span style="color:#b48ead;">else</span><span style="color:#c0c5ce;"> v
    </span><span style="color:#b48ead;">end
  end
end	
</span></pre>
        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://peperoncino000.netlify.com/about/">about me</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2019-12-23
        </span>

    </div>

    

                    
        <div class="post-content">
            <p>趣味プログラマ。Rustが最近のお気に入り。
Python/Ruby/PHP/Rust/Go/JavaScript/Elm/Haskell/OCaml/Elixirあたりに興味があります。</p>
<ul>
<li><a href="https://twitter.com/peperoncino000">Twitter</a></li>
<li><a href="https://github.com/KeisukeToyota">GitHub</a></li>
<li><a href="https://lapras.com/public/BE7TXA7">LAPRASプロフィール</a></li>
<li><a href="https://www.amazon.co.jp/hz/wishlist/ls/5WJZHNEF90RF?ref_=wl_share">ほしい物リスト</a></li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://peperoncino000.netlify.com/hello/">Hello world!</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2019-12-23
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://peperoncino000.netlify.com/tags/hello/">#Hello</a></span>
    

                    
        <div class="post-content">
            <p>ブログはじめました</p>

        </div>

                </div>
            <div class="pagination">
                <div class="pagination__buttons"></div>
            </div>
        </div>
        
    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright copyright--user">2019 Keisuke Toyota</div>
            </div>
    </footer>
    

</div>
</body>

</html>
